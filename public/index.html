<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover" />
 <title>TSGames: List & Download Game Terlengkap</title>
<meta name="description" content="Katalog game di gameresmi.pw. Cari judul, pilih genre, dan unduh game." />

<!-- Canonical (akan di-update JS sesuai ?q=&page=) -->
<link rel="canonical" href="https://gameresmi.pw/" />

<!-- Robots -->
<meta name="robots" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" />
<meta name="googlebot" content="index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1" />

<!-- Hreflang (kalau cuma Indonesia cukup ini) -->
<link rel="alternate" hreflang="id" href="https://gameresmi.pw/" />
<link rel="alternate" hreflang="x-default" href="https://gameresmi.pw/" />

<!-- Open Graph -->
<meta property="og:type" content="website" />
<meta property="og:site_name" content="TSGames" />
<meta property="og:locale" content="id_ID" />
<meta property="og:title" content="TSGames: List & Download Game Terlengkap" />
<meta property="og:description" content="Katalog game di gameresmi.pw. Cari judul, pilih genre, dan unduh game." />
<meta property="og:url" content="https://gameresmi.pw/" />
<meta property="og:image" content="https://gameresmi.pw/assets/tsgames-logo.png" />
<meta property="og:image:width" content="512" />
<meta property="og:image:height" content="512" />

<!-- Twitter -->
<meta name="twitter:title" content="TSGames: List & Download Game Terlengkap" />
<meta name="twitter:description" content="Katalog game di gameresmi.pw. Cari judul, pilih genre, dan unduh game." />
<meta property="og:image" content="https://gameresmi.pw/assets/og-cover.jpg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="TSGames ‚Äî Katalog & Download Game" />

<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:image" content="https://gameresmi.pw/assets/og-cover.jpg" />


<!-- Extra -->
<meta name="application-name" content="TSGames" />
<meta name="referrer" content="strict-origin-when-cross-origin" />
<link rel="sitemap" type="application/xml" href="/sitemap.xml" />

<!-- Performance kecil -->
<link rel="preload" as="image" href="assets/tsgames-logo.png" fetchpriority="high" />

<!-- JSON-LD base: Website + SearchAction -->
<script type="application/ld+json" id="ld-base">
{
  "@context": "https://schema.org",
  "@graph": [
    {
      "@type": "WebSite",
      "@id": "https://gameresmi.pw/#website",
      "name": "TSGames",
      "url": "https://gameresmi.pw/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://gameresmi.pw/?q={search_term_string}",
        "query-input": "required name=search_term_string"
      }
    },
    {
      "@type": "Organization",
      "@id": "https://gameresmi.pw/#org",
      "name": "TSGames",
      "url": "https://gameresmi.pw/",
      "logo": {
        "@type": "ImageObject",
        "url": "https://gameresmi.pw/assets/tsgames-logo.png"
      }
    }
  ]
}
</script>


  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@600;800;900&family=Rajdhani:wght@500;700&display=swap" rel="stylesheet">

  <!-- favicon -->
  <link rel="icon" href="assets/tsgames-logo.png" type="image/png">
  <link rel="apple-touch-icon" href="assets/tsgames-logo.png">
  <meta name="theme-color" content="#0ea5e9">

  <style>
    :root{
      --bg:#1f2328;
      --bg2:#2b2f33;
      --panel:#f3f4f6;
      --panel2:#ffffff;
      --text:#e8eaed;
      --muted:rgba(232,234,237,.72);
      --dark:#101316;

      --blue:#0ea5e9;
      --blue2:#1d4ed8;

      --pill:#0b5e7a;
      --line:rgba(255,255,255,.12);

      --shadow: 0 18px 50px rgba(0,0,0,.35);
      --r:14px;
      --max: 1180px;
    }

    *{ box-sizing:border-box }
    html,body{ height:100% }
    body{
      margin:0;
      font-family: "Rajdhani", ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, "Noto Sans";
      background: radial-gradient(900px 380px at 50% 0%, rgba(14,165,233,.18), transparent 55%),
                  linear-gradient(180deg, #14171a, #1f2328 45%, #1b1f23);
      color: var(--text);
      overflow-x:hidden;
    }

    a{ color: inherit; text-decoration:none }
    a:hover{ text-decoration:underline }
    button{ font:inherit; }

    /* padding biar nggak mepet + aman notch */
    .container{
      max-width: var(--max);
      margin: 0 auto;
      padding-left: max(16px, env(safe-area-inset-left));
      padding-right: max(16px, env(safe-area-inset-right));
    }

    /* utilities (mobile-first, lebih kebal) */
    .desktopOnly{ display:none; }
    .mobileOnly{ display:block; }

    /* desktop */
    @media (min-width: 741px){
      .desktopOnly{ display:block; }
      .mobileOnly{ display:none; }
    }

    /* Top bar */
    .topbar{
      position: sticky;
      top: 0;
      z-index: 60;
      background:#0e1012;
      border-bottom: 1px solid rgba(255,255,255,.08);
      color: rgba(255,255,255,.85);
      font-size: 12px;
      backdrop-filter: blur(10px);
      padding-top: env(safe-area-inset-top);
    }
    .topbar .inner{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 10px 0;
    }
    .toplinks{ display:flex; gap:18px; flex-wrap:wrap; align-items:center; }
    .toplinks a{ opacity:.9 }
    .toplinks a:hover{ opacity:1 }

    /* Login: tombol 3D */
    .login{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 10px 14px;
      border-radius: 14px;
      font-weight: 1000;
      letter-spacing: .2px;
      white-space: nowrap;

      color:#071019;
      background: linear-gradient(180deg,#bfe9ff,#7dd3fc 40%,#38bdf8 70%,#0ea5e9);
      border: 1px solid rgba(255,255,255,.38);
      box-shadow:
        0 12px 26px rgba(0,0,0,.35),
        inset 0 1px 0 rgba(255,255,255,.65),
        inset 0 -4px 0 rgba(2,132,199,.70);
      text-decoration:none !important;
      transform: translateY(0);
      transition: transform .12s ease, filter .12s ease, box-shadow .12s ease;
      -webkit-tap-highlight-color: transparent;
    }
    .login:hover{ filter: brightness(1.03); transform: translateY(-1px); }
    .login:active{
      transform: translateY(1px);
      box-shadow:
        0 7px 18px rgba(0,0,0,.35),
        inset 0 1px 0 rgba(255,255,255,.55),
        inset 0 -1px 0 rgba(2,132,199,.70);
    }

    /* Hamburger button */
    .menuBtn{
      width: 42px;
      height: 42px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      display:inline-flex;
      align-items:center;
      justify-content:center;
      cursor:pointer;
      user-select:none;
      -webkit-tap-highlight-color: transparent;
    }
    .menuBtn:hover{ filter: brightness(1.06); }

    /* FIX UTAMA: span inline -> width/height gak jalan, jadi bar-nya 0px */
    .menuIcon{
      display:inline-block;
      width: 18px;
      height: 14px;
      position: relative;
    }
    .menuIcon span{
      position:absolute;
      left:0; right:0;
      height: 2px;
      border-radius: 999px;
      background: rgba(255,255,255,.95);
      display:block;
    }
    .menuIcon span:nth-child(1){ top:0; }
    .menuIcon span:nth-child(2){ top:6px; opacity:.92; }
    .menuIcon span:nth-child(3){ top:12px; opacity:.88; }

    /* Mobile menu panel */
    .overlay{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.55);
      z-index: 80;
      opacity: 0;
      pointer-events: none;
      transition: opacity .18s ease;
    }
    .mobileMenu{
      position: fixed;
      left: 12px;
      right: 12px;
      top: calc(56px + env(safe-area-inset-top));
      z-index: 90;
      border-radius: 16px;
      background: rgba(16,19,22,.92);
      border: 1px solid rgba(255,255,255,.12);
      box-shadow: 0 28px 90px rgba(0,0,0,.55);
      transform: translateY(-10px);
      opacity: 0;
      pointer-events: none;
      transition: transform .18s ease, opacity .18s ease;
      overflow:hidden;
    }
    body.menuOpen .overlay{ opacity: 1; pointer-events: auto; }
    body.menuOpen .mobileMenu{ opacity: 1; transform: translateY(0); pointer-events: auto; }
    body.menuOpen{ overflow:hidden; }

    .mHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      padding: 12px 12px;
      border-bottom: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
    }
    .mTitle{
      font-family: "Orbitron", system-ui;
      font-weight: 900;
      letter-spacing: .4px;
      font-size: 12px;
      color: rgba(255,255,255,.92);
    }
    .closeBtn{
      width: 42px; height: 42px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.16);
      background: rgba(255,255,255,.06);
      color: rgba(255,255,255,.92);
      cursor:pointer;
      font-weight: 1000;
      -webkit-tap-highlight-color: transparent;
    }

    .mBody{ padding: 10px 12px 12px; }
    .mGroup{
      margin-top: 10px;
      padding: 10px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(255,255,255,.04);
    }
    .mGroup h4{
      margin:0 0 8px;
      font-size: 12px;
      font-weight: 1000;
      color: rgba(255,255,255,.85);
      letter-spacing:.2px;
    }
    .mLinks{
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .mLinks a{
      padding: 10px 10px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
      text-decoration:none;
      font-weight: 900;
      color: rgba(255,255,255,.92);
    }
    .mLinks a:hover{
      background: rgba(14,165,233,.16);
      border-color: rgba(14,165,233,.22);
    }

    /* Header */
    .mast{
      background: #3a3f44;
      border-bottom: 1px solid rgba(255,255,255,.08);
      box-shadow: inset 0 -1px 0 rgba(0,0,0,.25);
    }
    .mast .inner{
      padding: 10px 0 10px;
      display:flex;
      flex-direction:column;
      align-items:center;
      gap: 6px;
      text-align:center;
    }

    .logoLine{ margin:0; }
    .badge{
      font-family: "Orbitron", system-ui;
      font-size: 12px;
      font-weight: 900;
      letter-spacing: .6px;
      padding: 6px 12px;
      border-radius: 999px;
      background: rgba(0,0,0,.22);
      border: 1px solid rgba(255,255,255,.14);
    }

    .brand{ display:flex; align-items:center; text-decoration:none; }

    .brandLogo{
      height: clamp(110px, 28vw, 170px);
      width:auto;
      display:block;
      transform: translateY(-10px);
      filter: drop-shadow(0 10px 30px rgba(34,211,238,.22))
              drop-shadow(0 20px 55px rgba(168,85,247,.16));
    }

    .tagline{
      font-family: "Orbitron", system-ui;
      font-size: 18px;
      font-weight: 700;
      letter-spacing: .3px;
      color: rgba(255,255,255,.92);
      max-width: 980px;
      line-height: 1.35;
      margin-top: 2px;
      padding: 0 10px;
    }

    .genreRow{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      justify-content:center;
      align-items:center;
      padding: 2px 0 10px;
    }
    .genrePill{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding: 7px 12px;
      border-radius: 999px;
      background: var(--pill);
      border: 1px solid rgba(255,255,255,.22);
      color: rgba(255,255,255,.95);
      font-weight: 900;
      font-size: 12px;
      letter-spacing: .2px;
      cursor:pointer;
      user-select:none;
      transition: transform .12s ease, filter .12s ease;
    }
    .genrePill:hover{ transform: translateY(-1px); filter: brightness(1.05); }
    .genrePill.active{
      background: linear-gradient(135deg, rgba(14,165,233,1), rgba(29,78,216,1));
      border-color: rgba(255,255,255,.28);
    }

    /* Main nav (desktop) */
    .nav{
      background: #f1f3f5;
      color:#111827;
      border-top: 1px solid rgba(255,255,255,.08);
      border-bottom: 1px solid rgba(0,0,0,.12);
    }
    .nav .inner{
      display:flex;
      gap: 18px;
      flex-wrap:wrap;
      padding: 12px 0;
      align-items:center;
      justify-content:center;
      font-weight: 900;
      font-size: 14px;
    }
    .nav a{
      color:#101316;
      opacity:.9;
      padding: 6px 8px;
      border-radius: 10px;
    }
    .nav a:hover{
      opacity:1;
      background: rgba(14,165,233,.10);
      text-decoration:none;
      box-shadow: inset 0 0 0 1px rgba(14,165,233,.18);
    }

    /* Featured */
    .featured{ margin: 18px 0 18px; background: transparent; }
    .featuredFrame{
      border: 3px solid rgba(14,165,233,.55);
      border-radius: 10px;
      padding: 18px;
      background: rgba(0,0,0,.22);
      box-shadow: var(--shadow);
      overflow:hidden;
      position:relative;
    }
    .featuredTitle{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 12px;
      margin-bottom: 12px;
      color: rgba(255,255,255,.92);
      font-weight: 1000;
      letter-spacing:.2px;
    }
    .featuredTitle small{ color: rgba(255,255,255,.72); font-weight:800; }

    .featControls{ display:flex; gap:10px; align-items:center; }
    .iconBtn{
      width: 38px; height: 38px;
      border-radius: 10px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.92);
      cursor:pointer;
      font-weight: 1000;
      user-select:none;
    }
    .iconBtn:hover{ filter:brightness(1.06); }

    .featTrack{
      display:flex;
      gap: 14px;
      overflow:auto;
      scroll-snap-type: x mandatory;
      padding-bottom: 4px;
    }
    .featTrack::-webkit-scrollbar{ height: 10px; }
    .featTrack::-webkit-scrollbar-thumb{ background: rgba(255,255,255,.18); border-radius: 999px; }
    .featCard{
      flex: 0 0 210px;
      scroll-snap-align: start;
      border-radius: 10px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.16);
      overflow:hidden;
      position:relative;
      box-shadow: 0 12px 34px rgba(0,0,0,.35);
      cursor:pointer;
      transition: transform .12s ease;
    }
    .featCard:hover{ transform: translateY(-2px); }

    /* frame poster featured biar tidak mepet */
    .featPoster{
      padding: 10px;
      background: rgba(0,0,0,.20);
      border-bottom: 1px solid rgba(255,255,255,.10);
    }
    .featPosterFrame{
      border-radius: 12px;
      overflow:hidden;
      border: 2px solid rgba(255,255,255,.14);
      box-shadow: 0 14px 32px rgba(0,0,0,.35);
      background:#111827;
    }
.featPosterFrame{
  border-radius: 12px;
  overflow:hidden;
  border: 2px solid rgba(255,255,255,.14);
  box-shadow: 0 14px 32px rgba(0,0,0,.35);
  background:#111827;

  aspect-ratio: 1 / 1; /* bikin kotak */
}

.featPosterFrame img{
  width:100%;
  height:100%;
  object-fit: cover;
  display:block;
  background:#111827;
}


    .featCard .cap{ padding: 10px 10px 12px; color: rgba(255,255,255,.92); }
    .featCard .cap strong{
      display:block;
      font-size: 13px;
      line-height: 1.2;
      letter-spacing:.2px;
      margin-bottom: 8px;
      max-height: 2.4em;
      overflow:hidden;
    }
    .miniTags{ display:flex; gap:6px; flex-wrap:wrap; }
    .miniTag{
      font-size: 11px;
      font-weight: 900;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.18);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.88);
      user-select:none;
    }

    /* Layout: main content + sidebar */
    .content{
      margin-top: 14px;
      display:grid;
      grid-template-columns: 1fr 340px;
      gap: 18px;
      align-items:start;
    }
    @media (max-width: 980px){
      .content{ grid-template-columns: 1fr; }
    }

    /* Left: posts */
    .posts{ background: transparent; }
    .postCard{
      background: var(--panel2);
      color: #111827;
      border-radius: 8px;
      border: 1px solid rgba(0,0,0,.10);
      box-shadow: 0 12px 40px rgba(0,0,0,.20);
      overflow:hidden;
      margin-bottom: 16px;
    }
.postInner{
  display:grid;
  grid-template-columns: 210px 1fr; /* match Featured */
  gap: 0;
}

    @media (max-width: 700px){
      .postInner{ grid-template-columns: 1fr; }
    }

    /* poster area: tambah padding + frame border */
    .postThumb{
      background: #0f172a;
      border-right: 1px solid rgba(0,0,0,.08);
      padding: 12px;                 /* <<< biar nggak mepet */
    }
    @media (max-width: 700px){
      .postThumb{
        border-right: 0;
        border-bottom: 1px solid rgba(0,0,0,.08);
      }
    }

    /* genre di atas poster (maks 3 chip) */
    /* Poster: square + genre overlay di dalam gambar */
.posterFrame{
  position: relative;
  border-radius: 14px;
  overflow:hidden;
  border: 2px solid rgba(255,255,255,.14);
  box-shadow: 0 16px 40px rgba(0,0,0,.35);
  background: #0b1020;

  /* bikin persegi */
  aspect-ratio: 1 / 1;
}

.posterFrame img{
  width: 100%;
  height: 100%;
  object-fit: cover;
  display:block;
  background:#0f172a;
}

/* overlay genre chips (di dalam poster, pojok atas) */
.posterOverlay{
  position: absolute;
  top: 10px;
  left: 10px;
  right: 10px;
  display:flex;
  gap:6px;
  flex-wrap:wrap;
  z-index: 2;
  pointer-events: none; /* biar klik poster tetap aman */
}

.posterGenreChip{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  padding: 5px 9px;
  border-radius: 999px;
  font-size: 11px;
  font-weight: 1000;
  letter-spacing:.15px;
  color: rgba(255,255,255,.95);
  border: 1px solid rgba(255,255,255,.22);
  background: rgba(0,0,0,.45);
  backdrop-filter: blur(6px);
  user-select:none;
  white-space: nowrap;
  max-width: 100%;
  overflow:hidden;
  text-overflow: ellipsis;
}


    .postBody{ padding: 14px 16px 16px; }
    .postTags{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; margin-bottom: 10px; }
    .postTag{
      display:inline-flex;
      align-items:center;
      gap:6px;
      padding: 6px 10px;
      border-radius: 999px;
      border: 1px solid rgba(2,132,199,.22);
      background: rgba(14,165,233,.10);
      color: #0f172a;
      font-weight: 1000;
      font-size: 12px;
      user-select:none;
    }
    .postTitle{
      margin: 0 0 8px;
      font-size: 22px;
      font-weight: 1000;
      letter-spacing:.2px;
      line-height: 1.2;
    }
    .postMeta{
      font-size: 12px;
      color: rgba(17,24,39,.65);
      margin-bottom: 10px;
      font-weight: 800;
    }
    .postDesc{
      margin:0 0 12px;
      color: rgba(17,24,39,.85);
      line-height: 1.65;
      font-size: 13px;
    }
    .postActions{
      display:flex;
      gap: 10px;
      flex-wrap:wrap;
      align-items:center;
    }
    .btn{
      border:0;
      cursor:pointer;
      font-weight: 1000;
      font-size: 13px;
      padding: 10px 12px;
      border-radius: 8px;
      background: #0b5e7a;
      color: #ffffff;
      transition: filter .12s ease, transform .12s ease;
      user-select:none;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
    }
    .btn:hover{ filter:brightness(1.05); transform: translateY(-1px); text-decoration:none; }
    .btn.secondary{
      background: #e5e7eb;
      color:#111827;
      border: 1px solid rgba(0,0,0,.10);
    }
    .mono{ font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace; }

    /* Pager */
    .pager{
      display:flex;
      justify-content:space-between;
      align-items:center;
      gap: 12px;
      flex-wrap:wrap;
      padding: 12px;
      background: rgba(255,255,255,.06);
      border: 1px solid rgba(255,255,255,.14);
      border-radius: 10px;
      color: rgba(255,255,255,.88);
      box-shadow: 0 10px 30px rgba(0,0,0,.25);
    }
    .pager .left{ font-size: 12px; color: rgba(255,255,255,.78); font-weight: 800; }
    .pager .right{ display:flex; gap:8px; flex-wrap:wrap; align-items:center; justify-content:flex-end; }
    .pbtn{
      border: 1px solid rgba(255,255,255,.20);
      background: rgba(255,255,255,.08);
      color: rgba(255,255,255,.92);
      font-weight: 1000;
      font-size: 12px;
      padding: 8px 10px;
      border-radius: 10px;
      cursor:pointer;
      user-select:none;
    }
    .pbtn:hover{ filter:brightness(1.06); }
    .pbtn[disabled]{ opacity:.5; cursor:not-allowed; }
    .pbtn.active{
      background: linear-gradient(135deg, rgba(14,165,233,1), rgba(29,78,216,1));
      border-color: rgba(255,255,255,.25);
      color:#071019;
    }

    /* Sidebar */
    .sidebar{ position: sticky; top: 82px; }
    @media (max-width: 980px){
      .sidebar{ position: static; }
    }

    .widget{
      background: #ffffff;
      color: #111827;
      border: 1px solid rgba(0,0,0,.10);
      border-radius: 8px;
      box-shadow: 0 12px 40px rgba(0,0,0,.18);
      margin-bottom: 16px;
      overflow:hidden;
    }
    .widgetHead{
      padding: 12px 12px 10px;
      font-weight: 1000;
      border-bottom: 1px solid rgba(0,0,0,.08);
      background: #f3f4f6;
    }
    .widgetBody{ padding: 12px; }

    .searchRow{ display:flex; gap:10px; align-items:center; }
    .searchRow input{
      flex:1;
      padding: 10px 10px;
      border-radius: 6px;
      border: 1px solid rgba(0,0,0,.18);
      outline:none;
      font-size: 13px;
    }
    .searchRow input:focus{
      border-color: rgba(14,165,233,.55);
      box-shadow: 0 0 0 3px rgba(14,165,233,.18);
    }
    .searchRow button{
      padding: 10px 12px;
      border-radius: 6px;
      border:0;
      font-weight: 1000;
      cursor:pointer;
      color:#fff;
      background: #0b5e7a;
    }
    .hint{
      margin-top: 10px;
      font-size: 12px;
      color: rgba(17,24,39,.72);
      font-weight: 800;
    }

    .genreList{ display:flex; flex-direction:column; gap:10px; }
    .gRow{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap: 10px;
      font-weight: 900;
      font-size: 13px;
    }
    .gRow a{ color: #0b5e7a; text-decoration:none; }
    .gRow a:hover{ text-decoration:underline; }
    .count{
      background: #111827;
      color:#fff;
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      font-weight: 1000;
      opacity:.92;
    }

    /* Footer */
    .footer{
      margin-top: 24px;
      padding: 18px 0 24px;
      color: rgba(255,255,255,.75);
      font-size: 12px;
      border-top: 1px solid rgba(255,255,255,.10);
      background: rgba(0,0,0,.18);
    }
    .footer .row{
      display:flex;
      align-items:flex-start;
      justify-content:space-between;
      gap: 16px;
      flex-wrap:wrap;
    }
    .footer strong{ color: rgba(255,255,255,.92); }
    .footer a{ color: #7dd3fc; }

    /* Mobile tweaks */
    @media (max-width: 740px){
      .topbar .inner{ padding: 10px 0; }
      .tagline{ font-size: 15px; }
      .featCard{ flex-basis: 180px; }
      .postTitle{ font-size: 18px; }
      .posterFrame img{ height: 100%; }
    }
  </style>
</head>

<body>
  <!-- Topbar -->
  <div class="topbar">
    <div class="container inner">
      <!-- Mobile hamburger -->
      <button class="menuBtn mobileOnly" id="menuBtn" type="button" aria-label="Buka menu" aria-expanded="false" aria-controls="mobileMenu">
        <span class="menuIcon" aria-hidden="true">
          <span></span><span></span><span></span>
        </span>
      </button>

      <!-- Desktop toplinks -->
      <div class="toplinks desktopOnly">
        <a href="#contact">Contact Me</a>
        <a href="#dmca">DMCA Report</a>
        <a href="#support">Support Us</a>
        <a href="#advertise">Advertise Here</a>
      </div>

      <a class="login" href="https://gameresmi.pw/" title="Admin">Login</a>
    </div>
  </div>

  <!-- Mobile menu + overlay -->
  <div class="overlay" id="overlay" aria-hidden="true"></div>

  <div class="mobileMenu" id="mobileMenu" role="dialog" aria-modal="true" aria-label="Menu situs">
    <div class="mHead">
      <div class="mTitle">TSGames ‚Ä¢ Menu</div>
      <button class="closeBtn" id="menuClose" type="button" aria-label="Tutup menu">√ó</button>
    </div>
    <div class="mBody">
      <div class="mGroup">
        <h4>Menu Utama</h4>
        <div class="mLinks">
          <a href="./">Home</a>
          <a href="#howto">How to download?</a>
          <a href="#index">Games Index</a>
          <a href="#archive">Games Archive</a>
          <a href="#telegram">Telegram Channel</a>
        </div>
      </div>

      <div class="mGroup">
        <h4>Links</h4>
        <div class="mLinks">
          <a href="#contact">Contact Me</a>
          <a href="#dmca">DMCA Report</a>
          <a href="#support">Support Us</a>
          <a href="#advertise">Advertise Here</a>
        </div>
      </div>
    </div>
  </div>

  <!-- Header -->
  <header class="mast">
    <div class="container inner">
      <div class="logoLine">
        <span class="badge">Katalog Game</span>
      </div>

      <a class="brand" href="./" aria-label="TSGames">
        <picture>
          <source srcset="assets/tsgames-logo.png" type="image/png">
          <img class="brandLogo" src="assets/tsgames-logo.png" alt="TSGames" decoding="async" fetchpriority="high">
        </picture>
      </a>

      <div class="tagline">Cari judul favoritmu, pilih genre, lalu tekan Download di item yang kamu mau.</div>

      <div class="genreRow" id="genreRow" aria-label="Genre cepat">
        <!-- genre pills (dinamis) -->
      </div>
    </div>
  </header>

  <!-- Desktop nav -->
  <nav class="nav desktopOnly" aria-label="Menu utama">
    <div class="container inner">
      <a href="./" id="navHome">Home</a>
      <a href="#howto" id="navHow">How to download?</a>
      <a href="#index" id="navIndex">Games Index</a>
      <a href="#archive" id="navArchive">Games Archive</a>
      <a href="#telegram" id="navTelegram">Telegram Channel</a>
    </div>
  </nav>

  <main class="container">
    <section class="featured" aria-label="Featured">
      <div class="featuredFrame">
        <div class="featuredTitle">
          <div>Featured Picks <small id="featNote">pilihan cepat dari katalog</small></div>
          <div class="featControls">
            <button class="iconBtn" id="featPrev" type="button" aria-label="Geser kiri">‚Äπ</button>
            <button class="iconBtn" id="featNext" type="button" aria-label="Geser kanan">‚Ä∫</button>
          </div>
        </div>

        <div class="featTrack" id="featTrack">
          <!-- featured cards -->
        </div>
      </div>
    </section>

    <section class="content" aria-label="Konten">
      <div class="posts">
        <div id="posts"></div>

        <div class="pager" id="pager">
          <div class="left" id="pagerLeft">‚Äî</div>
          <div class="right" id="pagerRight"></div>
        </div>
      </div>

      <aside class="sidebar" aria-label="Sidebar">
        <div class="widget">
          <div class="widgetHead">Find your games</div>
          <div class="widgetBody">
            <div class="searchRow">
              <input id="searchInput" type="search" placeholder="Cari judul / genre / platform‚Ä¶" />
              <button id="searchBtn" type="button">Search</button>
            </div>
            <div class="hint" id="activeHint">Tip: coba ‚ÄúRPG‚Äù, ‚ÄúAction‚Äù, ‚ÄúPC‚Äù, atau judul game.</div>
          </div>
        </div>

        <div class="widget">
          <div class="widgetHead">Game Genres</div>
          <div class="widgetBody">
            <div class="genreList" id="genreList"></div>
          </div>
        </div>

        <div class="widget" id="howto">
          <div class="widgetHead">How to download?</div>
          <div class="widgetBody">
            <div style="font-size:13px; line-height:1.65; color:rgba(17,24,39,.84); font-weight:700">
              <ol style="margin:0; padding-left: 18px">
                <li>Pilih game dari daftar.</li>
                <li>Tekan tombol <b>Download</b> pada item game.</li>
                <li>Jika browser meminta konfirmasi, pilih <b>Save</b>.</li>
              </ol>
              <div style="margin-top:10px; color:rgba(17,24,39,.72); font-size:12px; font-weight:800">
                Catatan: nama file, genre, dan platform bisa kamu lihat di kartu game.
              </div>
            </div>
          </div>
        </div>

        <div class="widget" id="index">
          <div class="widgetHead">Games Index</div>
          <div class="widgetBody">
            <div style="font-size:13px; line-height:1.65; color:rgba(17,24,39,.84); font-weight:700">
              Gunakan pencarian atau klik genre untuk mempercepat filter. Kalau ingin ‚Äúreset‚Äù, kosongkan pencarian lalu Search.
            </div>
          </div>
        </div>
      </aside>
    </section>
  </main>

  <footer class="footer" id="contact">
    <div class="container row">
      <div>
        <strong>gameresmi.pw</strong><br/>
        Koleksi game: cover, genre, platform, dan tautan unduhan per item.
      </div>
      <div id="dmca">
        <strong>DMCA</strong><br/>
        <a href="mailto:dmca@gameresmi.pw">dmca@gameresmi.pw</a>
      </div>
      <div id="support">
        <strong>Support</strong><br/>
        <a href="#support">Support Us</a>
      </div>
      <div id="advertise">
        <strong>Advertise</strong><br/>
        <a href="#advertise">Advertise Here</a>
      </div>
      <div id="telegram">
        <strong>Telegram</strong><br/>
        <a href="#" onclick="alert('Tambahkan link channel Telegram kamu di sini.'); return false;">Telegram Channel</a>
      </div>
    </div>
  </footer>

<script>

  // ===== SEO helpers (dynamic) =====
  function upsertMeta(attr, key, value){
    let el = document.querySelector(`meta[${attr}="${CSS.escape(key)}"]`);
    if (!el){
      el = document.createElement("meta");
      el.setAttribute(attr, key);
      document.head.appendChild(el);
    }
    el.setAttribute("content", value);
  }

  function setCanonical(url){
    let link = document.querySelector('link[rel="canonical"]');
    if (!link){
      link = document.createElement("link");
      link.rel = "canonical";
      document.head.appendChild(link);
    }
    link.href = url;
  }

  function setJsonLd(id, obj){
    let s = document.getElementById(id);
    if (!s){
      s = document.createElement("script");
      s.type = "application/ld+json";
      s.id = id;
      document.head.appendChild(s);
    }
    s.textContent = JSON.stringify(obj);
  }

  function buildSeoText({ q, page, total, items }){
    const baseTitle = "TSGames: List & Download Game Terlengkap";
    const cleanQ = (q || "").trim();
    const pageTxt = page > 1 ? ` ‚Ä¢ Halaman ${page}` : "";
    const title = cleanQ ? `${cleanQ} ‚Äî TSGames${pageTxt}` : `${baseTitle}${pageTxt}`;

    // Deskripsi dibuat ‚Äúinformatif‚Äù, bukan keyword stuffing (Google benci yang maksa)
    const topNames = (items || []).slice(0, 3).map(x => x?.title).filter(Boolean);
    const extra = topNames.length ? ` Contoh: ${topNames.join(", ")}.` : "";
    const desc = cleanQ
      ? `Cari dan download game "${cleanQ}" di TSGames. Lihat genre, platform, ukuran file, dan tautan unduhan.${extra}`
      : `Katalog game di gameresmi.pw. Cari judul, pilih genre, dan unduh game. Update rutin dengan info genre, platform, dan ukuran file.${extra}`;

    return { title, desc };
  }

  function applySeo({ q, page, total, items }){
    const { title, desc } = buildSeoText({ q, page, total, items });

    // canonical mengikuti state (biar query/page punya URL ‚Äúresmi‚Äù)
    const u = new URL(location.href);
    // rapikan UTM dll kalau ada
    ["utm_source","utm_medium","utm_campaign","utm_term","utm_content","fbclid","gclid"].forEach(k => u.searchParams.delete(k));
    setCanonical(u.toString());

    document.title = title;

    upsertMeta("name", "description", desc);

    // OG/Twitter update (penting kalau share)
    upsertMeta("property", "og:title", title);
    upsertMeta("property", "og:description", desc);
    upsertMeta("property", "og:url", u.toString());
    upsertMeta("name", "twitter:title", title);
    upsertMeta("name", "twitter:description", desc);

    // JSON-LD: ItemList untuk daftar game yang sedang tampil
    const list = (items || []).map((it, idx) => {
      const slug = it?.slug || "";
      return {
        "@type": "ListItem",
        "position": idx + 1,
        "url": new URL(`download.html?slug=${encodeURIComponent(slug)}`, location.origin).toString(),
        "name": it?.title || slug
      };
    });

    setJsonLd("ld-itemlist", {
      "@context": "https://schema.org",
      "@type": "ItemList",
      "name": q ? `Hasil pencarian: ${q}` : "Daftar game",
      "itemListOrder": "https://schema.org/ItemListOrderAscending",
      "numberOfItems": list.length,
      "itemListElement": list
    });
  }


  const PAGE_SIZE = 15;

  // Mobile menu
  (function(){
    const menuBtn = document.getElementById("menuBtn");
    const menu = document.getElementById("mobileMenu");
    const overlay = document.getElementById("overlay");
    const closeBtn = document.getElementById("menuClose");

    function setOpen(open){
      document.body.classList.toggle("menuOpen", open);
      if (menuBtn) menuBtn.setAttribute("aria-expanded", open ? "true" : "false");
      if (overlay) overlay.setAttribute("aria-hidden", open ? "false" : "true");
    }

    if (menuBtn) menuBtn.addEventListener("click", () => setOpen(!document.body.classList.contains("menuOpen")));
    if (closeBtn) closeBtn.addEventListener("click", () => setOpen(false));
    if (overlay) overlay.addEventListener("click", () => setOpen(false));

    if (menu) menu.querySelectorAll("a").forEach(a => a.addEventListener("click", () => setOpen(false)));

    document.addEventListener("keydown", (e) => {
      if (e.key === "Escape") setOpen(false);
    });
  })();

  const els = {
    featTrack: document.getElementById("featTrack"),
    featPrev: document.getElementById("featPrev"),
    featNext: document.getElementById("featNext"),
    posts: document.getElementById("posts"),
    pagerLeft: document.getElementById("pagerLeft"),
    pagerRight: document.getElementById("pagerRight"),
    searchInput: document.getElementById("searchInput"),
    searchBtn: document.getElementById("searchBtn"),
    activeHint: document.getElementById("activeHint"),
    genreRow: document.getElementById("genreRow"),
    genreList: document.getElementById("genreList"),
  };

  function esc(s){
    return String(s ?? "").replace(/[&<>"']/g, m => ({
      "&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;"
    }[m]));
  }

  // genre bisa 1 atau "Action, Adventure, RPG"
  function splitGenres(raw){
    return String(raw || "")
      .split(",")
      .map(x => x.trim())
      .filter(Boolean);
  }

  function fmtDate(s){
    if (!s) return "";
    const t = s.replace(" ", "T") + "Z";
    const d = new Date(t);
    if (isNaN(d.getTime())) return s;
    return d.toLocaleDateString("id-ID", { year:"numeric", month:"long", day:"numeric" });
  }
  function fmtBytes(n){
    n = Number(n || 0);
    if (!n) return "-";
    const u = ["B","KB","MB","GB"];
    let i=0;
    while (n >= 1024 && i < u.length-1){ n/=1024; i++; }
    return `${n.toFixed(i===0?0:1)} ${u[i]}`;
  }
  function placeholderSvg(label){
    const text = (label || "GAME").slice(0, 18);
    const svg =
`<svg xmlns="http://www.w3.org/2000/svg" width="800" height="450">
  <defs>
    <linearGradient id="g" x1="0" x2="1">
      <stop offset="0" stop-color="#0ea5e9"/>
      <stop offset="1" stop-color="#1d4ed8"/>
    </linearGradient>
  </defs>
  <rect width="800" height="450" fill="#0f172a"/>
  <rect x="-40" y="-40" width="880" height="530" rx="26" fill="url(#g)" opacity=".22"/>
  <rect x="60" y="70" width="680" height="310" rx="22" fill="rgba(255,255,255,.08)" stroke="rgba(255,255,255,.18)"/>
  <text x="400" y="235" text-anchor="middle" font-family="system-ui,Segoe UI,Roboto" font-size="42" fill="rgba(255,255,255,.90)" font-weight="800">${esc(text)}</text>
</svg>`;
    return "data:image/svg+xml;charset=utf-8," + encodeURIComponent(svg);
  }

  function getState(){
    const u = new URL(location.href);
    const page = Math.max(1, parseInt(u.searchParams.get("page") || "1", 10) || 1);
    const q = (u.searchParams.get("q") || "").trim();
    return { page, q };
  }
  function setState({ page, q }){
    const u = new URL(location.href);
    u.searchParams.set("page", String(page || 1));
    if (q) u.searchParams.set("q", q);
    else u.searchParams.delete("q");
    history.pushState({ page, q }, "", u.toString());
  }

  async function fetchGames({ page, limit, q }){
    const u = new URL("/api/games", location.origin);
    u.searchParams.set("page", String(page || 1));
    u.searchParams.set("limit", String(limit || PAGE_SIZE));
    if (q) u.searchParams.set("q", q);

    const res = await fetch(u.toString(), { cache: "no-store" });
    const ct = res.headers.get("content-type") || "";
    const text = await res.text();

    if (!ct.includes("application/json")){
      const snippet = (text || "").slice(0, 220).replace(/[<>]/g, s => ({'<':'&lt;','>':'&gt;'}[s]));
      throw new Error(`Response bukan JSON (${res.status}). Snippet: ${snippet}`);
    }
    let data = null;
    try { data = text ? JSON.parse(text) : null; } catch {}
    if (!res.ok){
      const msg = (data && data.error) ? data.error : (res.statusText || "Request gagal");
      throw new Error(`${res.status} ${msg}`);
    }
    return data || {};
  }

  function buildGenres(items){
    const map = new Map();
    (items || []).forEach(it => {
      const arr = splitGenres(it.genre);
      arr.forEach(g => map.set(g, (map.get(g) || 0) + 1));
    });
    return [...map.entries()].sort((a,b) => b[1]-a[1]);
  }

  function renderGenrePills(genres, activeQ){
    const top = genres.slice(0, 10).map(([name]) => name);
    if (!top.length){
      els.genreRow.innerHTML = "";
      return;
    }

    els.genreRow.innerHTML = top.map(g => {
      const active = activeQ && activeQ.toLowerCase() === g.toLowerCase();
      return `<button class="genrePill ${active ? "active" : ""}" data-genre="${esc(g)}" type="button">${esc(g)}</button>`;
    }).join("");

    els.genreRow.querySelectorAll("[data-genre]").forEach(btn => {
      btn.addEventListener("click", () => {
        const g = btn.getAttribute("data-genre") || "";
        els.searchInput.value = g;
        goTo(1, g);
      });
    });
  }

  function renderGenreList(genres){
    if (!genres.length){
      els.genreList.innerHTML = `<div style="color:rgba(17,24,39,.65); font-weight:800; font-size:12px">Belum ada genre.</div>`;
      return;
    }
    els.genreList.innerHTML = genres.slice(0, 14).map(([g,c]) => {
      return `
        <div class="gRow">
          <a href="#" data-genre="${esc(g)}">${esc(g)}</a>
          <span class="count">${c}</span>
        </div>
      `;
    }).join("");

    els.genreList.querySelectorAll("[data-genre]").forEach(a => {
      a.addEventListener("click", (e) => {
        e.preventDefault();
        const g = a.getAttribute("data-genre") || "";
        els.searchInput.value = g;
        goTo(1, g);
      });
    });
  }

function tsDate(s){
  if (!s) return 0;
  const t = String(s).replace(" ", "T") + "Z";
  const ms = Date.parse(t);
  return isNaN(ms) ? 0 : ms;
}

function renderFeatured(items){
  const list = [...(items || [])]
    .sort((a,b) => tsDate(b.updated_at) - tsDate(a.updated_at)) // terbaru dulu
    .slice(0, 5); // cuma 5 teratas

  const note = document.getElementById("featNote");
  if (note) note.textContent = "5 terbaru dari katalog";

  if (!list.length){
    els.featTrack.innerHTML = `<div style="color:rgba(255,255,255,.75); font-weight:800">Belum ada featured.</div>`;
    return;
  }

    els.featTrack.innerHTML = list.map(it => {
      const title = it.title || it.slug || "Game";
      const cover = it.cover_url || placeholderSvg(title);
      const genres = splitGenres(it.genre).slice(0, 3);  // <= maksimal 3 tampil
      const p = (it.platform || "").trim();

      const tagsHtml = [
        ...genres.map(g => `<span class="miniTag">${esc(g)}</span>`),
        ...(p ? [`<span class="miniTag">${esc(p)}</span>`] : [])
      ].join("");

      return `
        <div class="featCard" data-slug="${esc(it.slug)}" title="${esc(title)}">
          <div class="featPoster">
            <div class="featPosterFrame">
              <img src="${esc(cover)}" alt="${esc(title)}" loading="lazy" onerror="this.src='${placeholderSvg(title)}'"/>
            </div>
          </div>
          <div class="cap">
            <strong>${esc(title)}</strong>
            <div class="miniTags">${tagsHtml}</div>
          </div>
        </div>
      `;
    }).join("");

    els.featTrack.querySelectorAll(".featCard").forEach(card => {
      card.addEventListener("click", () => {
        const slug = card.getAttribute("data-slug") || "";
        const el = document.querySelector(`[data-post="${CSS.escape(slug)}"]`);
        if (el) el.scrollIntoView({ behavior:"smooth", block:"start" });
      });
    });

    els.featPrev.onclick = () => els.featTrack.scrollBy({ left: -520, behavior: "smooth" });
    els.featNext.onclick = () => els.featTrack.scrollBy({ left:  520, behavior: "smooth" });
  }

  function renderPosts(data){
    const items = Array.isArray(data.items) ? data.items : [];
    const page = Number(data.page || 1);
    const limit = Number(data.limit || PAGE_SIZE);
    const total = Number(data.total || 0);
    const totalPages = Number(data.totalPages || Math.max(1, Math.ceil(total / limit)) || 1);

    if (!items.length){
      els.posts.innerHTML = `
        <div class="postCard">
          <div class="postBody" style="padding:16px">
            <div class="postTitle" style="margin:0 0 6px">Tidak ada hasil</div>
            <div class="postDesc" style="margin:0">Coba ganti keyword atau pilih genre lain.</div>
          </div>
        </div>
      `;
      els.pagerLeft.textContent = "‚Äî";
      els.pagerRight.innerHTML = "";
      return;
    }

    els.posts.innerHTML = items.map(it => {
      const title = it.title || it.slug || "Game";
      const cover = it.cover_url || placeholderSvg(title);

      const genres = splitGenres(it.genre).slice(0, 3); // tampil maksimal 3
      const platform = (it.platform || "").trim();
      const desc = (it.short_desc || "").trim() || "Klik Download untuk mengambil file game ini.";
      const date = fmtDate(it.updated_at);
      const size = fmtBytes(it.file_size_bytes);
      const slug = it.slug || "";

      const genreTopHtml = genres.length
        ? genres.map(g => `<span class="posterGenreChip">${esc(g)}</span>`).join("")
        : `<span class="posterGenreChip" style="opacity:.72">No genre</span>`;

      return `
        <article class="postCard" data-post="${esc(slug)}">
          <div class="postInner">
            <div class="postThumb">
  <div class="posterFrame">
    <div class="posterOverlay">${genreTopHtml}</div>
    <img src="${esc(cover)}" alt="${esc(title)}" loading="lazy" onerror="this.src='${placeholderSvg(title)}'"/>
  </div>
</div>


            <div class="postBody">
              <div class="postTags">
                ${platform ? `<span class="postTag">üïπÔ∏è ${esc(platform)}</span>` : ``}
                ${size !== "-" ? `<span class="postTag">üì¶ ${esc(size)}</span>` : ``}
              </div>

              <h3 class="postTitle">${esc(title)}</h3>
              <div class="postMeta">${date ? esc(date) : ""} ${date ? "‚Ä¢ " : ""}<span class="mono">${esc(slug)}</span></div>

              <p class="postDesc">${esc(desc)}</p>

              <div class="postActions">
                <a class="btn" href="download.html?slug=${encodeURIComponent(slug)}" rel="noopener">Download</a>
                <button class="btn secondary" type="button" data-copy="download.html?slug=${encodeURIComponent(slug)}">Copy link</button>
              </div>
            </div>
          </div>
        </article>
      `;
    }).join("");

    els.posts.querySelectorAll("[data-copy]").forEach(b => {
      b.addEventListener("click", async () => {
        const path = b.getAttribute("data-copy") || "";
        const url = new URL(path, location.href).toString();
        try{
          await navigator.clipboard.writeText(url);
          b.textContent = "Copied ‚úì";
          setTimeout(() => (b.textContent = "Copy link"), 1100);
        }catch{
          alert(url);
        }
      });
    });

    const start = total ? ((page - 1) * limit + 1) : 0;
    const end = total ? Math.min(page * limit, total) : 0;

    els.pagerLeft.textContent = total
      ? `Showing ${start}‚Äì${end} of ${total} ‚Ä¢ Page ${page}/${totalPages}`
      : `Page ${page}`;

    els.pagerRight.innerHTML = "";
    const mk = (label, disabled, onClick, cls="") => {
      const btn = document.createElement("button");
      btn.className = "pbtn" + (cls ? " " + cls : "");
      btn.textContent = label;
      btn.disabled = disabled;
      btn.onclick = onClick;
      return btn;
    };

    const st = getState();
    const q = st.q || "";

    els.pagerRight.appendChild(mk("¬´", page <= 1, () => goTo(1, q)));
    els.pagerRight.appendChild(mk("‚Äπ", page <= 1, () => goTo(page - 1, q)));

    const win = 6;
    let from = Math.max(1, page - Math.floor(win/2));
    let to = Math.min(totalPages, from + win);
    from = Math.max(1, to - win);

    for (let p = from; p <= to; p++){
      els.pagerRight.appendChild(mk(String(p), false, () => goTo(p, q), p === page ? "active" : ""));
    }

    els.pagerRight.appendChild(mk("‚Ä∫", page >= totalPages, () => goTo(page + 1, q)));
    els.pagerRight.appendChild(mk("¬ª", page >= totalPages, () => goTo(totalPages, q)));
  }

  function setHint(q){
    if (!q) {
      els.activeHint.textContent = "Tip: coba ‚ÄúRPG‚Äù, ‚ÄúAction‚Äù, ‚ÄúPC‚Äù, atau judul game.";
      return;
    }
    els.activeHint.innerHTML = `Filter aktif: <span class="mono">${esc(q)}</span> ‚Äî kosongkan lalu Search untuk reset.`;
  }

  async function loadAll(){
    const st = getState();
    applySeo({ q: st.q || "", page: st.page || 1, total: 0, items: [] });

    els.searchInput.value = st.q || "";
    setHint(st.q || "");

    try{
      const pool = await fetchGames({ page: 1, limit: 60, q: "" });
      renderFeatured(pool.items || []);
      const genres = buildGenres(pool.items || []);
      renderGenrePills(genres, st.q || "");
      renderGenreList(genres);
    }catch(e){
      renderFeatured([]);
      els.genreRow.innerHTML = "";
      els.genreList.innerHTML = `<div style="color:rgba(17,24,39,.65); font-weight:800; font-size:12px">Genre tidak tersedia.</div>`;
    }

    try{
      const data = await fetchGames({ page: st.page, limit: PAGE_SIZE, q: st.q || "" });
      renderPosts(data);

      applySeo({
  q: st.q || "",
  page: Number(data.page || st.page || 1),
  total: Number(data.total || 0),
  items: Array.isArray(data.items) ? data.items : []
});

    }catch(e){
      els.posts.innerHTML = `
        <div class="postCard">
          <div class="postBody" style="padding:16px">
            <div class="postTitle" style="margin:0 0 6px">Gagal memuat katalog</div>
            <div class="postDesc" style="margin:0">ERROR: <span class="mono">${esc(e.message)}</span></div>
          </div>
        </div>
      `;
      els.pagerLeft.textContent = "‚Äî";
      els.pagerRight.innerHTML = "";
    }
  }

  function goTo(page, q){
    const p = Math.max(1, Number(page || 1));
    const qq = (q || "").trim();
    setState({ page: p, q: qq });
    setHint(qq);
    loadAll();
    window.scrollTo({ top: 0, behavior: "smooth" });
  }

  els.searchBtn.addEventListener("click", () => goTo(1, els.searchInput.value));
  els.searchInput.addEventListener("keydown", (e) => {
    if (e.key === "Enter") goTo(1, els.searchInput.value);
  });

  window.addEventListener("popstate", () => loadAll());
  loadAll();
</script>
</body>
</html>
